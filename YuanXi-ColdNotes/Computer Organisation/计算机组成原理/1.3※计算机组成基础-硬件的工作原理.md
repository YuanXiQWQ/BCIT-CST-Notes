1.2.3 计算机系统的层次结构  
1.3 计算机的性能指标
## 结构
![[Pasted image 20241120195809.png]] 
## 主存储器
- 构成
	- **存储体**: 由一系列存储元件构成, 用来存放二进制数据
	- **MAR**: 存储地址寄存器 (Memory Address Register)
	- **MDR**: 存储数据寄存器 (Memory Data Register)
![[Pasted image 20241120200429.png]]
- 相当于
![[Pasted image 20241120200632.png]]
### 存储体
- 数据在存储体中**按地址**存储
- 结构
	- **存储单元**：每个存储单元存放一串二进制代码
	- **存储字 (word)**：存储单元中二进制代码的组合
	- **存储字长**：存储单元中二进制代码的位数
	- **存储元**：即存储二进制的电子元件，每个存储元可存 1 bit
![[Pasted image 20241120200833.png]]
### MAR 
- 存储数据地址
- 位数反映了存储单元的最大值
	- 例: $MAR=4位$
		- 存储单元最大有 $2^4=16$ 个, 因为 MAR 只能表示 16 个地址
### MDR
- 存储接受地址传出的数据
- 位数等于**存储字长**
	- 例: $MDR=16位$
		- 每个存储单元可以存放 16 bit
		- 一个字 (word) = 16 bit

## 运算器
- 用于实现算术运算 (加减乘除) 和逻辑运算 (与或非)
- 构成
	- **ACC**：累加器 (Accumulator)，用于存放<u>操作数</u>，或<u>运算结果</u>。
	- **MQ**：商积寄存器 (Multiple-Quotient Register) ，在<u>乘、除</u>运算时，用于存放<u>操作数</u>或<u>运算结果</u>。
	- **X**：算术与逻辑单元的输入寄存器，用于存放<u>操作数</u>。
	- **ALU**：算术逻辑单元，通过内部复杂的电路实现<u>算数运算、逻辑运算</u>。
- 其中
	- ACC, MQ, X (可以有多个) 属于用于存放数据的**寄存器**
	- ALU 属于**算术逻辑单元** Arithmetic and Logic Unit
![[Pasted image 20241120201634.png]]
- 存储的内容

|           寄存器, 单元 \ 存储的内容            |    加    |   减   |  乘   |   除    |
| :---------------------------------: | :-----: | :---: | :--: | :----: |
|        **Accumulator (ACC)**        |  被加数、和  | 被减数、差 | 乘积高位 | 被除数、余数 |
| **Multiple-Quotient Register (MQ)** | 乘数、乘积低位 |       |      |   商    |
|                **X**                |   加数    |  减数   | 被乘数  |   除数   |
## 控制器
- 结构
	- **PC**：程序计数器（Program Counter），存放下一条指令地址，有自动加 1 功能。
	- **IR**：指令寄存器（Instruction Register），存放当前执行的指令。
	- **CU**：控制单元（Control Unit），分析指令，给出控制信号。
![[Pasted image 20241120202827.png]]
- 完成一条指令的操作
1. **PC:** 取指令
2. **IR:** 分析指令
3. **CU:** 执行指令

## 工作流程
-  示例高级语言代码
```c
int a = 2;
int b = 3;
int c = 1;
int y = 0;
void main(){
	y = a * b + c;
}
```
1. 编译, 装入主存
<div style="display: grid; grid-template-columns: 1fr 2fr 2fr 3fr;">

  <!-- Header Row 1 -->
  <div style="border: 1px solid black; padding: 5px; font-weight: bold; text-align: center; grid-row: 1 / span 2;">主存地址</div>
  <div style="border: 1px solid black; padding: 5px; font-weight: bold; text-align: center; grid-row: 1; grid-column: 2 / span 2;">指令</div>
  <div style="border: 1px solid black; padding: 5px; font-weight: bold; text-align: center; grid-row: 1 / span 2;">注释</div>

  <!-- Header Row 2 -->
  <div style="border: 1px solid black; padding: 5px; font-weight: bold; text-align: center; grid-row: 2; grid-column: 2;">操作码</div>
  <div style="border: 1px solid black; padding: 5px; font-weight: bold; text-align: center; grid-row: 2; grid-column: 3;">地址码</div>

  <!-- Row 1 -->
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 3; grid-column: 1;">0</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; color: red; font-weight: bold; grid-row: 3; grid-column: 2;">000001</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; color: goldenrod; grid-row: 3; grid-column: 3;">0000000101</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 3; grid-column: 4;">取数 a 至 ACC</div>

  <!-- Row 2 -->
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 4; grid-column: 1;">1</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; color: red; font-weight: bold; grid-row: 4; grid-column: 2;">000010</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; color: goldenrod; grid-row: 4; grid-column: 3;">0000000110</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 4; grid-column: 4;">乘 b 得 ab, 存于 ACC 中</div>

  <!-- Row 3 -->
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 5; grid-column: 1;">2</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; color: red; font-weight: bold; grid-row: 5; grid-column: 2;">000011</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; color: goldenrod; grid-row: 5; grid-column: 3;">0000000111</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 5; grid-column: 4;">加 c 得 ab+c, 存于 ACC 中</div>

  <!-- Row 4 -->
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 6; grid-column: 1;">3</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; color: red; font-weight: bold; grid-row: 6; grid-column: 2;">000100</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; color: goldenrod; grid-row: 6; grid-column: 3;">0000001000</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 6; grid-column: 4;">将 ab+c, 存于主存单元</div>

  <!-- Row 5 -->
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 7; grid-column: 1;">4</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; color: red; font-weight: bold; grid-row: 7; grid-column: 2;">000110</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; color: goldenrod; grid-row: 7; grid-column: 3;">0000000000</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 7; grid-column: 4;">停机</div>

  <!-- Row 6 -->
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 8; grid-column: 1;">5</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 8; grid-column: 2 / span 2;">0000000000000010</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 8; grid-column: 4;">原始数据 a=2</div>

  <!-- Row 7 -->
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 9; grid-column: 1;">6</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 9; grid-column: 2 / span 2;">0000000000000011</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 9; grid-column: 4;">原始数据 b=3</div>

  <!-- Row 8 -->
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 10; grid-column: 1;">7</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 10; grid-column: 2 / span 2;">0000000000000001</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 10; grid-column: 4;">原始数据 c=1</div>

  <!-- Row 9 -->
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 11; grid-column: 1;">8</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 11; grid-column: 2 / span 2;">0000000000000000</div>
  <div style="border: 1px solid black; padding: 5px; text-align: center; grid-row: 11; grid-column: 4;">原始数据 y=0</div>
  
</div>
