## 功能
- **指令控制**: 
	- 完成取指令, 分析指令和执行指令的操作, 即程序的顺序控制
- **操作控制**:
	- 一条指令的功能往往是由若干操作信号的组合来实现的. CPU 管理并产生由内存去除的每条指令的操作信号, 把各种操作信号送往相应的部件, 从而控制这些部件按指令的要求进行动作
- **时间控制**:
	- 对各种操作加以时间上的控制. 时间控制要求为每条指令按时间顺序提供应有的控制信号
- **数据加工**
	- 对数据进行算术和逻辑运算
- **中断处理**
	- 对计算机运行过程中出现的异常情况和特殊请求进行处理
### 控制器
- **运算器**: 
	- 对数据进行加工
- **控制器**: 
	- 协调并控制计算机各部件执行程序的指令序列
	- 基本功能包括取指令, 分析指令, 执行指令
		- 分析指令: 
			- 操作码译码 (分析本条指令要完成什么操作), 产生操作数的有效地址
		- 执行指令: 
			- 根据分析指令得到的"操作命令"和"操作数地址"形成操作信号控制序列, 控制运算器, 存储器以及 I/O 设备完成相应的操作
		- 中断处理: 
			- 管理总线及输入输出, 处理异常情况 (如掉电) 和特殊请求 (如打印机请求打印一行字符)
## 基本结构
![[Pasted image 20241211025717.png]]
### 运算器
![[Pasted image 20241211022255.png]]
- **算术逻辑单元 (ALU)**: 
	- 主要功能是进行算术/逻辑运算
- **通用寄存器组**: 
	- AX, BX, CX, DX, SP 等(其中 H 表示高字节部分, L 表示低字节部分), 用于存放操作数 (包括源操作数, 目的操作数及中间结果) 和各种地址信息等
	- SP 是堆栈指针, 用于只是栈顶的地址
#### 算术逻辑单元 ALU
##### 专用数据通路方式
根据指令执行过程中的数据和地址的流动方向安排连接线路
![[Pasted image 20241211022444.png]]
- 由于 ALU 需要接受两个操作数 A, B, 寄存器组中的数既有可能是 A, 也有可能是 B, 因此每个寄存器都会有 A, B 两个操作数的通路.
- **性能较高, 基本不存在数据冲突现象, 但结构复杂, 硬件量大, 不易实现**
- 由于 ALU 一次只需要一个 A 和一个 B, 如果直接用导线连接, 相当于多个寄存器**同时且一直**向 ALU 传输数据
	- 解决方案 1
		- 使用多路选择器根据控制信号选择一路输出
		  ![[Pasted image 20241211022920.png]]
	- 解决方案 2
		- 使用三态门可以控制每一路是否输出
		  ![[Pasted image 20241211023019.png]]
		  - 如: ${R0}_{out}$ 为 $1$ 时 $R_{0}$ 中的数据输出到 A 端, ${R0}_{out}$ 为 $0$ 时 $R_{0}$ 中的数据输无法输出
##### CPU 内部单总线方式
将所有寄存器的输入端和输出端都连接到一条公共的通路上
![[Pasted image 20241211024006.png]]
- **结构简单, 容易实现, 但数据传输存在较多冲突现象, 性能较低**
- 为了解决数据冲突, 需要一个暂存寄存器
**暂存寄存器**
- 用于暂存从主存读来的数据, 这个数据不能存放在通用寄存器中, 否则会破坏其原有内容
	- 如: 两个操作数分别来自主存和 $R_{0}$, 最后结果存回 $R_{0}$, 那么从贮存中取来的操作数直接放入暂存器, 就不会破坏运算前 $R_{0}$ 的内容
**累加寄存器(ACC)**
- 是一个通用寄存器, 用于暂时存放 ALU 运算的结果信息, 用于实现加法运算
**程序状态字寄存器 (PSW)**
- 保留由算术逻辑运算指令或测试指令的结果而建立的各种状态信息, 如溢出标志 (OP), 符号标志 (SF), 零标志 (ZF), 进位标志 (0F) 等. PSW 中这些位参与并决定微操作的形成
**移位器**
- 对运算结果进行移位运算
**计数器**
- 控制乘除运算的操作步骤
### 控制器
![[Pasted image 20241211025509.png]]
**程序计数器 (PC)**
- 用于指出下一条指令在主存的存放地址. CPU 就是根据 PC 的内容去主存中取指令的. 因程序中指令通常是顺序执行的, 所以 PC 有自增功能
**指令寄存器 (IR)**
- 用于保存当前正在执行的指令, 指令分为操作码 (OP) 和地址码 (Ad) 两部分
**指令译码器 (ID)**
- 进队操作码字段进行译码, 向控制器提供特定的操作信号
**微操作信号发生器**
- 根据 IR 的内容 (指令), PSW 的内容 (状态信息) 及时序信号, 产生控制整个计算机系统所需的各种控制信号, 其结构有组合逻辑型和存储逻辑型两种
**时序系统**
- 用于产生各种时序信号, 都是由统一始终 (CLOCK) 分频得到
**存储器地址寄存器 (MAR)**
- 用于存放索要访问的主存单元的地址
**存储器数据寄存器 (MDR)**
- 用于存放向主存写入的信息或从主存中读出的信息
