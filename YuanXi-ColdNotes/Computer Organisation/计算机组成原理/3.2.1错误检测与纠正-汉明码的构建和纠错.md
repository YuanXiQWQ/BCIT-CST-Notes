对于奇偶校验码, 虽然可以知道传输信息是否出错, 但是有如下缺点:
- 无法检验有偶数个位置发生错误的情况
- 无法知道错误发生的具体位置
## 二进制纠错编码的原理
- 由于二进制数只有 0,1 两种情况, 因此只需要知道出错的位置即可自行修复
- 纠错编码的原理就是增加冗余度来提高可靠性
	- 增加监督码元, 与信息码元之间存在某种关系
	- 不符合这种关系的便是禁用码组
## 定义
- 汉明距离: 汉明码组之间不同位的数量
- 最小码距: 汉明码组之间汉明距离的最小值
## 汉明码的构建
### 汉明码需要的最小位数
设传输数据有 $m$ (message) 位, 校验码有 $p$ (parity) 位,
- 则易知
	- 校验码一共有 $2^p$ 种可能的取值
	- 若想通过校验码指出任一位上发生的错误, 必须满足
$$
2^p \geq m + p + 1
$$
- 由于校验码总共有 $2^p$ 种取值, 即最多能表示 $2^p$ 个错误, 一定大于或等于总的码的位数, 加上一个全是正确的情况
因此根据该公式, 可由已知的 m 求出需要的最小汉明码位 p
### 校验位的位置
一般定义将校验位放在 $2^n(n \in \mathbb{N}_0)$ 位上
### 校验位的校验范围
汉明码中的第 $n$ 个校验码 $p_n$, 用来校验码位的二进制中第 $n$ 位为 $1$ 的码位
- 例如, 一段汉明码的长度为 7, 则码位有 $1,2,3,4,5,6,7$, 所需校验码为 $2^p \geq 7 + 1, p \geq 3$ , $3$ 位
- 将它们分别用二进制表示, 则为 $001,010,011,100,101,110,111$
- 其中, 第一位校验码 $p_{1}$ 用来校验所有码位二进制中第 $1$ 位为 $1$ 的码位
	- $\textcolor{green}{001},010,\underline{01\textcolor{#ffc000}{1}},100,\underline{10\textcolor{#ffc000}{1}},110,\underline{11\textcolor{#ffc000}{1}}$
	- 即, $p_{1}$ 表示 $1,3,5,7$ 位
- 第二位校验码 $p_{2}$ 用来校验所有码位二进制中第 $2$ 位为 $1$ 的码位
    - $001,\textcolor{green}{010},\underline{0\textcolor{#ffc000}{1}1},100,101,\underline{1\textcolor{#ffc000}{1}0},\underline{1\textcolor{#ffc000}{1}1}$
    - 即, $p_{2}$ 表示 $2,3,6,7$ 位
- 第三位校验码 $p_{3}$ 用来校验所有码位二进制中第 $3$ 位为 $1$ 的码位
    - $001,010,011,\textcolor{green}{100},\underline{\textcolor{#ffc000}{1}01},\underline{\textcolor{#ffc000}{1}10},\underline{\textcolor{#ffc000}{1}11}$
    - 即, $p_{3}$ 表示 $3,5,6,7$ 位
### 校验方法: 奇偶校验
校验位的状态取决于其负责的码位中 $1$ 的个数, 以及指定的奇偶校验规则
- 当其所负责的区域中有奇数个 $1$ 时
	- 奇校验规则的汉明码中该位校验码为 $0$
	- 偶校验规则的汉明码中该位校验码为 $1$
- 当其所负责的区域中有偶数个 $1$ 时
	- 奇校验规则的汉明码中该位校验码为 $1$
	- 偶校验规则的汉明码中该位校验码为 $0$
- 这一部分的奇偶校验查询 $1$ 个数的奇偶性在计算机中同样是通过逐位异或计算的
### 例
有 4 位待发送信息 $1010$, 求其在偶校验下的汉明码:
$\because 待发送信息m = 4$
$\therefore 2^p \geq 5 + p$
$p \geq 3$
$\therefore 需要校验位 3 位$
由于汉明码位位于 $2^n$ 位上, 因此可以将这四个汉明码分别放在 $2^0=1,2^1=2,2^2=4$ 位上

|  **1**  |  **2**  | **3** |  **4**  | **5** | **6** | **7** |
| :-----: | :-----: | :---: | :-----: | :---: | :---: | :---: |
| $p_{1}$ | $p_{2}$ |  $1$  | $p_{3}$ |  $0$  |  $1$  |  $0$  |
$p_{1}负责: 3,5,7$
- 分别为 $1,0,0$, 偶校验码为 $1$, 则 $p_{1} = 1$
$p_{2}负责: 3,6,7$
- 分别为 $1,1,0$, 偶校验码为 $0$, 则 $p_{2}=0$
$p_{3}负责: 5,6,7$
- 分别为 $0,1,0$, 偶校验码为 $1$, 则 $p_{3}=1$

| **1** | **2** | **3** | **4** | **5** | **6** | **7** |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: |
|  $1$  |  $0$  |  $1$  |  $1$  |  $0$  |  $1$  |  $0$  |
$\therefore 最终结果为1011010$
## 汉明码的纠错
当计算机 A 发出偶校验汉明码 1011010 后, 假设 B 接收到的是 1011011

| **1** | **2** | **3** | **4** | **5** | **6** | **7** |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: |
|  $1$  |  $0$  |  $1$  |  $1$  |  $0$  |  $1$  |  $1$  |
则首先列表

| **错误位** | **校验码** | **信息码 1** | **信息码 2** | **信息码 3** |
| :-----: | :-----: | :-------: | :-------: | :-------: |
| $e_{1}$ | $p_{1}$ |  $m_{3}$  |  $m_{5}$  |  $m_{7}$  |
| $e_{2}$ | $p_{2}$ |  $m_{3}$  |  $m_{6}$  |  $m_{7}$  |
| $e_{3}$ | $p_{3}$ |  $m_{5}$  |  $m_{6}$  |  $m_{7}$  |
代入校验码和信息码

| **错误位** | **校验码** | **信息码 1** | **信息码 2** | **信息码 3** |
| :-----: | :-----: | :-------: | :-------: | :-------: |
| $e_{1}$ |   $1$   |    $1$    |    $0$    |    $1$    |
| $e_{2}$ |   $0$   |    $1$    |    $1$    |    $1$    |
| $e_{3}$ |   $1$   |    $0$    |    $1$    |    $1$    |
由于汉明码约定为偶校验, 因此使用偶校验检测校验码和信息码, 并填入错误位

| **错误位** | **校验码** | **信息码 1** | **信息码 2** | **信息码 3** |
| :-----: | :-----: | :-------: | :-------: | :-------: |
|   $1$   |   $1$   |    $1$    |    $0$    |    $1$    |
|   $1$   |   $0$   |    $1$    |    $1$    |    $1$    |
|   $1$   |   $1$   |    $0$    |    $1$    |    $1$    |
则此时得到的

|  **e**  | **错误位** |
| :-----: | :-----: |
| $e_{1}$ |   $1$   |
| $e_{2}$ |   $1$   |
| $e_{3}$ |   $1$   |
从下往上排列, 组合出的二进制数转为十进制就是出错的位数

| **$e_{3}$** | **$e_{2}$** | **$e_{1}$** |
| :-----: | :-----: | :-----: |
|   $1$   |   $1$   |   $1$   |
${111}_{2} = 7_{10}$, 第七位出错, 将其取反
$101101\textcolor{orange}{1} \to 101101\textcolor{green}{0}$
与原信息相同