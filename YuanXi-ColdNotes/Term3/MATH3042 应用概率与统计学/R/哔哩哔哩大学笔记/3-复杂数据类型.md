# Matrix 矩阵
- 将数据按行和列组织的数据类对象，相当于**二维同质数组**，用于描述二维数据
- 和向量类似，矩阵的每个元素要求具有相同的数据类型
## 创建矩阵
### 用法
```R
m <- matrix（
	data     = Vector,
	nrow     = Int,
	ncol     = Int,
	byrow    = Logic,
	dimnames = List
）
```
- data：用来填充矩阵的数据
- nrow：矩阵的行数,
	- 如果省略，会根据 data 和 ncol 计算
	- 如果 ncol 也被省略，则默认二者都是 1
	- 如果填入其它值，会强制转为整数（如果不可以强制转换则出错）
	- 如果 `length(data) < nrow * ncol` 会循环填充 data
	- 如果 `length(data)` 不能整除 `nrow * ncol` 会有警告
- ncol：矩阵的列数
	- 与 nrow 规则相同
- byrow：是否按行填充。默认 `FALSE`（按列填充）
- dimnames：行名和列名，默认 NULL
	- 填入的 List 长度需为 2，形式为 `list('行名', '列名')`
### 示例
```R
m <- matrix(
	1:6,
	nrow = 2,
	ncol = 3,
	byrow = T,
	dimnames = list(
		c('行1', '行2'), 
		c('列1', '列2', '列3')
	)
)
m
#      列1 列2 列3
# 行1   1   3   5
# 行2   2   4   6
```
### 索引元素
- 访问行，列
```R
m[1,1]
# 1
```
- 访问行
```R
m[1, ]
# 列1 列2 列3
#  1   3   5

m[c(F, T), ]
# 列1 列2 列3
#  2   4   6

m['r1', ]
# 列1 列2 列3
#  1   3   5
```
- 修改值
```R
m[1, ] <- c(100, 99, 98)
#      列1 列2 列3
# 行1  100  99  98
# 行2   2   4   6

m[1, ] <- 100
#      列1 列2 列3
# 行1  100 100 100
# 行2   2   4   6
```
### 矩阵的操作
- 矩阵 transpose 转置
```R
t(m)
#      行1 行2
# 列1 100   2
# 列2 100   4
# 列3 100   6
```
---
# Array 数组

- 创建**多维同质数组**（所有元素必须是同一数据类型）
- 和 `matrix` 一样，底层都是 **向量 + 维度信息 (`dim`)**
    - 但是 `matrix` 只能是 **二维**，`array` 可以是 **多维**
## 创建数组
### 用法
```R
arr <- array(
	data      = Vector,
    dim       = IntVector,
	dimnames  = List )
```
- data：用来填充数组的数据
- dim：每个维度的尺寸
    - 类型：IntVector（如 c(行数, 列数, 第三维大小, …)）
    - `length(dim)` 决定维度数；`prod(dim)` 是数组总元素数
    - 若 `length(data) < prod(dim)` 会**循环填充** data
    - 若 `length(data)` 不能整除 `prod(dim)` 会有**警告**
    - 非整数会被**强制转为整数**（无法转换则报错）
- dimnames：各维度的名字列表
    - 类型：List，长度必须等于 `length(dim)`
    - 形式：`list(第1维字符向量, 第2维字符向量, 第3维字符向量, …)`
    - 默认 `NULL`（无名字）
### 示例

```R
arr <- array(
    1:12,
    c(2, 3, 2),
    list(
        c('行1','行2'),
		c('列1','列2','列3'),
		c('表1','表2')
    )
)
arr 
# , , 表1
#
#      列1 列2 列3
# 行1    1   3   5
# 行2    2   4   6
#
# , , 表2
#
#      列1 列2 列3
# 行1    7   9  11
# 行2    8  10  12
```
## 索引元素
- 使用 `[i, j, k, …]` 进行多维索引；维度数与 `length(dim(arr))` 一致
- 可以用**位置索引**（数字）、**逻辑索引**（TRUE/FALSE）、或**名字索引**（当设置了 dimnames）
- 访问单个元素
```R
arr[1, 2, 2]
# 9
arr['行1','列2','表2']
# 9
```
- 访问单个维度
```R
arr[ , , '表1']
#      列1 列2 列3
# 行1    1   3   5
# 行2    2   4   6
arr[ , '列3', ]
#     表1 表2
# 行1   5  11
# 行2   6  12
arr[c(FALSE, TRUE), , ]
# , , 表1
#      列1 列2 列3
# 行2    2   4   6
#
# , , 表2
#      列1 列2 列3
# 行2    8  10  12
```
## 修改值
- 修改单个元素
```R
arr['行1','列1','表2'] <- 700
# , , 表2 的 (行1, 列1) 位置变为 700
```
- 修改一个维度
```R
arr['行1', , '表2'] <- c(900, 901, 902)
# , , 表2
#      列1 列2 列3
# 行1  900  901  902
# 行2    8   10   12
arr[ , '列2', ] <- 100
# , , 表1
#
#      列1 列2 列3
# 行1    1 100   5
# 行2    2 100   6
#
# , , 表2
#
#      列1 列2 列3
# 行1    7 100  11
# 行2    8 100  12
```
## 数组的操作
- 基本属性
```R
dim(arr)       # 维度向量，如 c(2,3,2)
length(arr)    # 元素总个数
dimnames(arr)  # 各维度名称列表

```
- 给每个元素进行计算
```R
每个元素加 1
arr + 1
每个元素 * 2
arr * 2
```
- 跨维统计（apply 按维度聚合）
```R
# margin=1 表示按第1维（行）聚合；2 表示按第2维（列）；3 表示按第3维（表）；c(1,2) 表示保留行列、跨表聚合
apply(arr, MARGIN = 3, FUN = colSums)   # 对每个“表”，按列求和
apply(arr, MARGIN = c(1,2), FUN = sum)  # 所有“表”相加，得到 2×3 的矩阵
```
- 维度置换（多维“转置”）
	- aperm 等价于高维数组的 t() 概念（t 只用于二维矩阵）
```R
aperm(arr, perm = c(2,1,3))  # 交换第1维和第2维（行列互换，每个“表”转置）
aperm(arr, perm = c(3,1,2))  # 把原第3维放到第1维
```
- 维度重设
```R
将数组重塑为 3×4 矩阵
dim(arr) <- c(3, 4)
```
---
# Data frame 数据框
- **二维异质数组**，相当于 Excel 的表格，按行和列存储
- 每列是一个变量，每行是一个观测样本
## 创建数据框
### 用法
```R
data.frame(
	第一列 = Vector(c(第一行, 第二行, 第三行)),
	第二列 = Vector(c(第一行, 第二行, 第三行)),
	第三列 = Vector(c(第一行, 第二行, 第三行)),
	...
)
```
### 示例
```R
df <- data.frame(
  name = c("小明", "小红", "小刚"),
  age = c(18, 19, 20),
  pass = c(TRUE, TRUE, FALSE)
)
df
#   name age  pass
# 1 小明  18  TRUE
# 2 小红  19  TRUE
# 3 小刚  20 FALSE
```
## 索引元素
- 访问行
```R
df[1, ]
#   name age pass
# 1 小明  18 TRUE
```
- 访问列
```R
单独列出该列（输出向量）
df[ ,1]
# [1] "小明" "小红" "小刚"
df$name
# [1] "小明" "小红" "小刚"

截出数据框的列（输出数据框）
df['name']
#   name
# 1 小明
# 2 小红
# 3 小刚
```
- 访问多个元素
```R
df[c('name', 'age')]
#   name age
# 1 小明  18
# 2 小红  19
# 3 小刚  20
```
---
# List 列表
- 数据对象的**异质有序集合**
- 元素可以是向量、矩阵、数据框、列表
- 每个元素的长度可以不同
## 创建列表
### 用法
```R
list(
	obj1,
	obj2,
	...
)
```
### 示例
```R
m <- matrix(
	1:6,
	nrow = 2,
	ncol = 3,
	byrow = T,
	dimnames = list(
		c('行1', '行2'), 
		c('列1', '列2', '列3')
	)
)

arr <- array(
    1:12,
    c(2, 3, 2),
    list(
        c('行1','行2'),
		c('列1','列2','列3'),
		c('表1','表2')
    )
)

list1 <- list(
			a = 1,
			b = 'char',
			c = m,
			d = arr
)

list1
# $a
# [1] 1
# 
# $b
# [1] "char"
# 
# $c
#     列1 列2 列3
# 行1   1   2   3
# 行2   4   5   6
# 
# $d
# , , 表1
# 
#     列1 列2 列3
# 行1   1   3   5
# 行2   2   4   6
# 
# , , 表2
# 
#     列1 列2 列3
# 行1   7   9  11
# 行2   8  10  12
```
## 索引元素
- 访问元素
```R
list1[[1]]
# [1] 1
list1[['a']]
# [1] 1
```
- 访问列表
```R
list1[1]
# $a
# [1] 1
```