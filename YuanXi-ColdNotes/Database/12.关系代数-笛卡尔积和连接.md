## 笛卡尔积（Cartesian Product）
### $R \times S$
- 笛卡尔积将两个关系的每个元组进行组合，因此结果包含了所有可能的元组组合。
- 如果
	- $R$关系: $n$个属性, $k_1$个元组
	- $S$关系: $m$个属性, $k_2$个元组
	则 $R \times S$
	- 将$R$中的每个元组$t_1$和$S$中的每个元组$t_2$配对连接
	- 列数: $n + m$
		- $前 \ n$列是关系$R$的一个元组$t_1$
		- $后 \ m$列是关系$S$的一个元组$t_2$
	- 行数 $k_1 \times k_2$
	- 当$R$和$S$中有重名属性$A$时, 则采用$R.A$和$S.A$分别命名对应的属性列

$R$

|                   $A$                   |                   $B$                   |                   $C$                   |
| :-------------------------------------: | :-------------------------------------: | :-------------------------------------: |
|  <span style="color:red">$a_1$</span>   |  <span style="color:red">$b_1$</span>   |  <span style="color:red">$c_1$</span>   |
| <span style="color:orange">$a_1$</span> | <span style="color:orange">$b_2$</span> | <span style="color:orange">$c_2$</span> |
|  <span style="color:blue">$a_2$</span>  |  <span style="color:blue">$b_2$</span>  |  <span style="color:blue">$c_1$</span>  |


$S$

|  $A$  |  $B$  |  $C$  |
| :---: | :---: | :---: |
| $a_1$ | $b_2$ | $c_2$ |
| $a_1$ | $b_3$ | $c_2$ |
| $a_2$ | $b_2$ | $c_1$ |

$R \times S$

|                  $R.A$                  |                  $R.B$                  |                  $R.C$                  | $S.A$ | $S.B$ | $S.C$ |
| :-------------------------------------: | :-------------------------------------: | :-------------------------------------: | :---: | :---: | :---: |
|  <span style="color:red">$a_1$</span>   |  <span style="color:red">$b_1$</span>   |  <span style="color:red">$c_1$</span>   | $a_1$ | $b_2$ | $c_2$ |
|  <span style="color:red">$a_1$</span>   |  <span style="color:red">$b_1$</span>   |  <span style="color:red">$c_1$</span>   | $a_1$ | $b_3$ | $c_2$ |
|  <span style="color:red">$a_1$</span>   |  <span style="color:red">$b_1$</span>   |  <span style="color:red">$c_1$</span>   | $a_2$ | $b_2$ | $c_1$ |
| <span style="color:orange">$a_1$</span> | <span style="color:orange">$b_2$</span> | <span style="color:orange">$c_2$</span> | $a_1$ | $b_2$ | $c_2$ |
| <span style="color:orange">$a_1$</span> | <span style="color:orange">$b_2$</span> | <span style="color:orange">$c_2$</span> | $a_1$ | $b_3$ | $c_2$ |
| <span style="color:orange">$a_1$</span> | <span style="color:orange">$b_2$</span> | <span style="color:orange">$c_2$</span> | $a_2$ | $b_2$ | $c_1$ |
|  <span style="color:blue">$a_2$</span>  |  <span style="color:blue">$b_2$</span>  |  <span style="color:blue">$c_1$</span>  | $a_1$ | $b_2$ | $c_2$ |
|  <span style="color:blue">$a_2$</span>  |  <span style="color:blue">$b_2$</span>  |  <span style="color:blue">$c_1$</span>  | $a_1$ | $b_3$ | $c_2$ |
|  <span style="color:blue">$a_2$</span>  |  <span style="color:blue">$b_2$</span>  |  <span style="color:blue">$c_1$</span>  | $a_2$ | $b_2$ | $c_1$ |

## 连接 (JOIN)
- 用于将来自两个或多个表 (关系) 的相关数据组合在一起
- 通过连接操作, 可以基于一个或多个共有的属性 (列) 将表中的记录关联起来, 从而生成一个包含组合信息的新表.
- 连接可以看作是对表的笛卡尔积的特定条件的选择
$$
\sigma_{A \theta B}(R \times S)
$$
	- $A$和$B$: 分别为$R$和$S$上度数相等且可比的属性组
	- $\theta$: 比较运算符

### 自然连接 (Natural Join)
- 记作
$$
R\bowtie S
$$
- 自然连接是一种特殊的连接操作, 自动在两个关系中查找具有相同名称的属性, 并根据这些属性的值是否相等来组合元组

### 条件连接（Theta Join）
- 记作  
$$
\underset{A \theta B}{R \bowtie S}
$$
- 条件连接运算首先对表执行自然连接$R \bowtie S$, 然后再对结果应用选择条件 $A \theta B$

#### 例
有表 $R$ , $S$ 如下, 求 $\underset {C \lt E} {R \bowtie S}$
$R$

|  $A$  |  $B$  | $C$  |
| :---: | :---: | :--: |
| $a_1$ | $b_1$ | $5$  |
| $a_1$ | $b_2$ | $6$  |
| $a_2$ | $b_3$ | $8$  |
| $a_2$ | $b_4$ | $12$ |

$S$

|  $B$  | $E$  |
| :---: | :--: |
| $b_1$ | $3$  |
| $b_2$ | $7$  |
| $b_3$ | $10$ |
| $b_3$ | $2$  |
| $b_5$ | $2$  |
- 解:
$R \bowtie S$
$\because 表 R, S 的共同属性为B$
$\therefore 对比属性为B$

对于$B = b_1$:
-  R：

|  $A$  |  $B$  | $C$ |
| :---: | :---: | :-: |
| $a_1$ | $b_1$ | $5$ |

-  S：

|  $B$  | $E$ |
| :---: | :-: |
| $b_1$ | $3$ |

- 连接结果:

|  $A$  |  $B$  | $C$ | $E$ |
| :---: | :---: | :-: | :-: |
| $a_1$ | $b_1$ | $5$ |  3  |

|  $A$  |  $B$  | $C$ | $E$ |
| :---: | :---: | :-: | :-: |
| $a_1$ | $b_1$ | $5$ |  3  |
| $a_1$ | $b_2$ | $6$ |  7  |
| $a_2$ | $b_3$ | $8$ | 10  |
