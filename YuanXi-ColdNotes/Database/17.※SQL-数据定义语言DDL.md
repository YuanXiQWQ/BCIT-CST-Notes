## 数据定义语言(Data Definition Language)
用于定义和管理数据库结构的SQL子语言
## 功能
- 定义表(模式)
	- 创建表
	- 删除表
	- 修改表定义
- 定义视图(外模式)
	- 创建视图
	- 删除视图
	- 简介修改视图定义:删除+创建
- 定义索引(内模式)
	- 创建索引
	- 删除索引
	- 简洁修改索引定义:删除+创建
                
## DDL操作方式 (DDL Operations)

| 操作对象 (Object) | 创建 (Create)  | 删除 (Drop)  | 修改 (Alter)  |
| :-----------: | :----------: | :--------: | :---------: |
|   表 (Table)   | CREATE TABLE | DROP TABLE | ALTER TABLE |
|   视图 (View)   | CREATE VIEW  | DROP VIEW  |      /      |
|  索引 (Index)   | CREATE INDEX | DROP INDEX |      /      |
### 定义基本表
- 关系名(表明)
- 属性名(列名)
- 数据属性类型
- 完整性约束
```sql
CREATE TABLE <表名>(
[<列名> <数据类型(长度限制)> [<列级完整性约束条件>]],
[<列名> <数据类型(长度限制)> [<列级完整性约束条件>]],
...,
);
```
例:
创建表Student:

| 学号 (sid) | 姓名 (sname) | 性别 (sgender) | 学院编号 (sdept) | 出生日期 (sbirth) |
|------------|---------------|----------------|------------------|-------------------|
| 20230001   | 张三          | M              | 101              | 2001-01-15        |
| 20230002   | 李四          | F              | 102              | 2002-02-20        |
| 20230003   | 王五          | M              | 101              | 2000-03-25        |
| 20230004   | 赵六          | F              | 103              | 1999-04-30        |
| 20230005   | 钱七          | M              | 102              | 2001-05-10        |
DDL:

```sql
CREATE DATABASE example;

USE example;

CREATE TABLE Student (
    sid CHAR(8) PRIMARY KEY,
    sname VARCHAR(20) NOT NULL,
    sgender CHAR(1),
    sdept INT,
    sbirth DATE
);

```

其中,var为定长字符,varchar为变长字符

### 完整性约束

|  完整性约束  |              关键字               |          说明           |                               示例                                |
| :-----: | :----------------------------: | :-------------------: | :-------------------------------------------------------------: |
|  主键约束   |          PRIMARY KEY           | 唯一标识表中的每一行，不能重复且不能为空  |                   `PRIMARY KEY (column_name)`                   |
| 参照完整性约束 | FOREIGN KEY ... REFERENCES ... | 用于建立表与表之间的关系，引用其他表的主键 | `FOREIGN KEY (column_name) REFERENCES other_table(column_name)` |
|  唯一性约束  |             UNIQUE             |  确保列中的所有值都是唯一的，可以为空   |                     `UNIQUE (column_name)`                      |
|  非空值约束  |            NOT NULL            |      确保列中的值不能为空       |                     `column_name NOT NULL`                      |
|  取值约束   |             CHECK              |     限制列的值必须满足指定条件     |                    `CHECK (column_name > 0)`                    |
|  默认值约束  |            DEFAULT             |    当没有指定值时，为列提供默认值    |              `column_name DEFAULT 'default_value'`              |
|  复合主键   |          PRIMARY KEY           |  由多个列组成的主键，确保组合的值唯一   |                `PRIMARY KEY (column1, column2)`                 |
| 唯一组合约束  |             UNIQUE             |     保证多个列组合的值是唯一的     |                   `UNIQUE (column1, column2)`                   |
|  检查约束   |             CHECK              |     确保列值符合某个逻辑表达式     |          `CHECK (column_name IN ('value1', 'value2'))`          |


### 数据类型
#### 整数数据(Integer Data Types)

|    数据类型      | 字节数 |          范围           |
| :----------: | :-: | :-------------------: |
|  **bigint**  | $8$ | $[-2^{63}, 2^{63}-1]$ |
|   **int**    | $4$ | $[-2^{31}, 2^{31}-1]$ |
| **smallint** | $2$ | $[-2^{15}, 2^{15}-1]$ |
| **tinyint**  | $1$ |      $[0, 255]$       |
|   **bit**    | $1$ | 只能是$0$或$1$, 其它默认为$1$  |
#### 精确数值数据 (Exact Numeric Data Types)

|    数据类型     |            范围             |                                           说明                                           |
| :---------: | :-----------------------: | :------------------------------------------------------------------------------------: |
| **decimal** | $[-10^{38}+1, 10^{38}-1]$ | 用来存储固定精度和范围的数值型数据，需指定范围和精度: $decimal(p[,q])$, 例$decimal(10,2$表示该数值总体长度$10$位,精确小数点后$2$位 |
| **numeric** | $[-10^{38}+1, 10^{38}-1]$ |                    与 decimal 相同，用来存储固定精度和范围的数值型数据。$numeric(p[,q])$                     |


#### 浮点数值数据 (Floating Point Data Types)

|   数据类型    | 字节数 |         描述          |            范围             |
| :-------: | :-: | :-----------------: | :-----------------------: |
| **float** |  8  | 用来存储数据，最多可为53位, 不精确 | $[-1.79E+308, 1.79E+308]$ |
| **real**  |  4  | 位数为24，用4个字节存储, 不精确  |  $[-3.04E+38, 3.04E+38]$  |
#### 字符字符串数据 (Character String Data Types)

|      数据类型      |              描述               |
| :------------: | :---------------------------: |
|  **char(n)**   | 固定的长度为$n$个字符的字符串，不足的长度会用空格补上。 |
| **varchar(n)** | 可变的最大长度为$n$个字符的字符串，尾部的空格会去掉。  |

#### 日期时间数据 (Date and Time Data Types)

| 数据类型         | 格式                     | 示例                     |
|:------------------:|:----------------------:|:-----------------------:|
| **date**          | YYYY-MM-DD             | DATE '2004-09-30'       |
| **time**          | HH:MM:SS               | TIME '15:30:02.5'       |
| **datetime**      | YYYY-MM-DD HH:MM:SS    | DATETIME '2024-10-21 14:45:00' |

### 修改基本表

```sql
ALTER TABLE <表名> ADD <新列名> <数据类型> | 完整性约束;
ALTER TABLE <表名> DROP <列名> | <完整性约束名>;
ALTER TABLE <表名> MODIFY <列名> <数据类型>;
```

### 删除基本表
```sql
DROP TABLE <表名>;
```
- 系统从数据字典中删去该基本表的
	- 描述
	- 所有索引的描述
	- 表中数据
- 表上的视图往往仍然保留, 但无法引用