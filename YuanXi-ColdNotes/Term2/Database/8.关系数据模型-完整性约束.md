- 关系模型的完整性规则是指对关系的某种约束条件
- 关系模型中的三类完整性约束:
	- 实体完整性
	- 参照完整性
	- 用户定义的完整性
- 实体完整性和参照完整性是关系模型必须满足的完整性约束条件, 被称作是关系的两个不变形, 应该由关系系统自动支持
### 实体完整性 (Entity Intergrity)
- 主键 (Primary Key) 唯一切不能为空
- 主属性不能为空
例:
SAP (SUPERVISOR, SPECIALITY,  <u>POSGRADUATE</u> )
POSGRADUATE 属性为主键 (假设研究生不会重名), 则其不能为空

T (<u>TID</u>, TNAME, TITLE)
C (<u>CID</u>, CNAME, TID)
S (<u>SID</u>, SNAME, AGE, SEX)
SC (<u>SID, CID</u>, SCORE)
(SID, CID) 为主键, 组成主键的属性 SID 和 CID 为主属性, 则其不能为空

### 参照完整性 (Referential Integrity)
### 关系间的引用
例: 学生课程学生与课程之间的多对多联系
	 学生 (<u>学号</u>，姓名，性别，专业号，出生日期)
	 课程 (<u>课程号</u>，课程名，学分)
	 选修 (<i><u>学号</u>，<u>课程号</u></i>，成绩)

选修关系中, 学号和课程号为该关系的主属性, 分别是来自关系学生, 课程的外键 (Foreign Key).

#### 外键 (Foreign Key)
- 如果一个关系 $R$ 中的一个属性 $F$ 对应这另一关系 $S$ 的主键 $K$ , 那么 $F$ 在关系 $R$ 中称为**外键**
- 说明
	- 关系 $R$ 和 $S$ 不一定是不同的关系
	- 被参照关系 $S$ 的主键 $K$ 和参照关系的外键 $F$ 必须定义在同一个 (或同一组) 域上
	- 外键并不一定要与相应的主键同名
	- 当外键与相应的主键属于不同关系是, 往往取相同的名字, 以便于识别
	例: 学生 (<u>学号</u>，姓名，性别，专业号，出生日期，<i style="color: red;">班长</i>)
		班长本身属于学生, 又作为外键被学生引用
#### 参照完整性规则
- 参照完整性规则就是定义外键与主键之间的引用规则
- 规则:
	- 外键的取值必须为**空值**(暂时) 或者等于**被参照表中某个元组的主键值**
	例: 学生 (<u>学号</u>，姓名，性别，专业号，出生日期，<i style="color: red;">班长</i>)
	<i style="color: red;">班长</i> 的取值范围可以为**NULL**(还没有班长) 或学生关系的**学号**(该学号的学生为班长)
### 用户定义的完整性 (User-defined Integrity)
- 用户定义的完整性是针对某一具体关系数据库的约束条件, 反映某一具体应用所涉及的数据必须满足的语义要求
- 关系模型应提供定义和检验这类完整性的机制, 以便用同意的系统的方法处理它们, 而不要由应用程序承担这一功能
	例: 课程 (<u>课程号</u>, 课程名, 学分)
	- 课程名必须取非空唯一值 (实体完整性)
	- 课程名必须取非空值 (用户定义完整性)
	- 学分只能取值{1,2,3,4}(用户定义完整性)